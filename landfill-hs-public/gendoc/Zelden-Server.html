<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Zelden.Server</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Zelden-Server.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Zelden.Server</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:ConnectionBox">ConnectionBox</a>  = <a href="#v:ConnectionBox">ConnectionBox</a> (<span class="keyword">forall</span> a. <a href="Zelden-Server.html#t:Connection">Connection</a> a =&gt; a)</li><li class="src short"><span class="keyword">data</span>  <a href="#t:ProtocolBox">ProtocolBox</a>  = <a href="#v:ProtocolBox">ProtocolBox</a> (<span class="keyword">forall</span> a. <a href="Zelden-Server.html#t:Protocol">Protocol</a> a =&gt; a)</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Event">Event</a>  = <a href="#v:Event">Event</a> <a href="Zelden-Server.html#t:EventData">EventData</a> (Map String String)</li><li class="src short"><span class="keyword">type</span> <a href="#t:RoomKey">RoomKey</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:UserKey">UserKey</a> = String</li><li class="src short"><span class="keyword">data</span>  <a href="#t:EventData">EventData</a> <ul class="subs"><li>= <a href="#v:Connected">Connected</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a>  </li><li>| <a href="#v:Disconnected">Disconnected</a>  </li><li>| <a href="#v:UserJoinedRoom">UserJoinedRoom</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a>  </li><li>| <a href="#v:UserPartedRoom">UserPartedRoom</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:PartReason">PartReason</a>  </li><li>| <a href="#v:UserQuit">UserQuit</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String  </li><li>| <a href="#v:RoomTopic">RoomTopic</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String  </li><li>| <a href="#v:RoomMessage">RoomMessage</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String  </li><li>| <a href="#v:UserMessage">UserMessage</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String  </li><li>| <a href="#v:UserStatus">UserStatus</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:UserStatus">UserStatus</a>  </li><li>| <a href="#v:SelfUserKey">SelfUserKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a>  </li><li>| <a href="#v:UserSwitchedKey">UserSwitchedKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:UserStatus">UserStatus</a> <ul class="subs"><li>= <a href="#v:Available">Available</a>  </li><li>| <a href="#v:Away">Away</a>  </li><li>| <a href="#v:Busy">Busy</a>  </li><li>| <a href="#v:Offline">Offline</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:PartReason">PartReason</a> <ul class="subs"><li>= <a href="#v:Parted">Parted</a> String  </li><li>| <a href="#v:Kicked">Kicked</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String  </li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:EventCallback">EventCallback</a> = <a href="Zelden-Server.html#t:ConnectionBox">ConnectionBox</a> -&gt; <a href="Zelden-Server.html#t:Event">Event</a> -&gt; IO ()</li><li class="src short"><span class="keyword">class</span>  <a href="#t:Protocol">Protocol</a> a  <span class="keyword">where</span><ul class="subs"><li><a href="#v:getProtocolName">getProtocolName</a> :: a -&gt; String</li><li><a href="#v:initProtocol">initProtocol</a> :: a -&gt; IO ()</li><li><a href="#v:likesPastebin">likesPastebin</a> :: a -&gt; Bool</li><li><a href="#v:createConnection">createConnection</a> :: a -&gt; <a href="Zelden-Server.html#t:EventCallback">EventCallback</a> -&gt; IO <a href="Zelden-Server.html#t:ConnectionBox">ConnectionBox</a></li></ul></li><li class="src short"><span class="keyword">class</span>  <a href="#t:Connection">Connection</a> a  <span class="keyword">where</span><ul class="subs"><li><a href="#v:setParam">setParam</a> :: a -&gt; String -&gt; String -&gt; IO ()</li><li><a href="#v:enable">enable</a> :: a -&gt; IO ()</li><li><a href="#v:disable">disable</a> :: a -&gt; IO ()</li></ul></li><li class="src short"><span class="keyword">class</span>  <a href="#t:Controller">Controller</a> a </li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ConnectionBox" class="def">ConnectionBox</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ConnectionBox" class="def">ConnectionBox</a> (<span class="keyword">forall</span> a. <a href="Zelden-Server.html#t:Connection">Connection</a> a =&gt; a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ProtocolBox" class="def">ProtocolBox</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ProtocolBox" class="def">ProtocolBox</a> (<span class="keyword">forall</span> a. <a href="Zelden-Server.html#t:Protocol">Protocol</a> a =&gt; a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Event" class="def">Event</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Event" class="def">Event</a> <a href="Zelden-Server.html#t:EventData">EventData</a> (Map String String)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RoomKey" class="def">RoomKey</a> = String</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:UserKey" class="def">UserKey</a> = String</p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:EventData" class="def">EventData</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Connected" class="def">Connected</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a></td><td class="doc"><p>Connection just connected. This shouldn't actually be issued until
</p></td></tr><tr><td class="src"><a name="v:Disconnected" class="def">Disconnected</a></td><td class="doc"><p>Connection was disconnected.
</p></td></tr><tr><td class="src"><a name="v:UserJoinedRoom" class="def">UserJoinedRoom</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a></td><td class="doc"><p>User joined room, possibly us or someone else. Note that this can
 happen without a request that the connection join a room if the server
 forces us to join a room (IRC is one such protocol that can do this).
</p></td></tr><tr><td class="src"><a name="v:UserPartedRoom" class="def">UserPartedRoom</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:PartReason">PartReason</a></td><td class="doc"><p>User left room, possibly us or someone else. Note that this is one of
 two ways a user can leave a room; the other is with UserQuit, which
 removes the user from all rooms they were joined to. 
</p></td></tr><tr><td class="src"><a name="v:UserQuit" class="def">UserQuit</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String</td><td class="doc"><p>User quit, possibly us or someone else. If it's us, this will almost
 certainly be followed by a Disconnect event. Note that we can end up
 quitting without trying if, say, we ping out of the server for some
 reason. (A local pingout just results in a Disconnect, without a
 corresponding UserQuit. TODO: Actually, should we have a UserQuit for
 ourselves on a local pingout? Probably protocol-specific though.)
</p></td></tr><tr><td class="src"><a name="v:RoomTopic" class="def">RoomTopic</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String</td><td class="doc"><p>Topic for the specified room was modified. This also happens right
 after a UserJoinedRoom on ourselves, indicating the room's current
 topic. Information about the time the topic was last set and by whom
 should go into the event's extra parameters, although I might move it
 to RoomTopic if it's used enough. (It would almost certainly be wrapped
 in a Maybe, though, as topic changes don't mention what time they were
 set at or any such thing.)
</p></td></tr><tr><td class="src"><a name="v:RoomMessage" class="def">RoomMessage</a> <a href="Zelden-Server.html#t:RoomKey">RoomKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String</td><td class="doc"><p>Message was sent to a room. I might merge this with UserMessage in the
 future, and have a Maybe RoomKey parameter that's Nothing for users and
 Just roomKey for rooms.
</p></td></tr><tr><td class="src"><a name="v:UserMessage" class="def">UserMessage</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String</td><td class="doc"><p>Private message to us from the specified user. I'm thinking IRC
 notices will just be UserMessages (and RoomMessages) with special keys
 in the event's extra parameters, as they're almost exclusive to IRC. I
 also haven't decided how I want to handle /me actions yet.
</p></td></tr><tr><td class="src"><a name="v:UserStatus" class="def">UserStatus</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:UserStatus">UserStatus</a></td><td class="doc"><p>User's status changed. I haven't decided whether our own status
 changes should be reported with this. When a protocol connects, all
 users should be assumed to have a status of Offline; UserStatus messages
 will be sent by the connection as soon as it knows the statuses of any
 users that it knows about. Note that, on some protocols, offline users
 can still send user and room messages.
</p></td></tr><tr><td class="src"><a name="v:SelfUserKey" class="def">SelfUserKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a></td><td class="doc"><p>We know our user key now. This must be sent relatively quickly after
 Connected, and before any other events that use UserKeys; not doing so
 will result in lots of exceptions within Zelden itself. I'm still
 deciding whether this or UserSwitchedKey will be issued when our key
 changes while we're still connected.
</p></td></tr><tr><td class="src"><a name="v:UserSwitchedKey" class="def">UserSwitchedKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a></td><td class="doc"><p>Another user that we previously knew under the first key is now known
 under the second, and any further events mentioning the user will use
 the second key. It's up to the user of the connection whether it wants
 to start tracking the user under the second key or just log the event
 under the first key and treat the user as a new user. (Zelden will
 likely have a configuration option for choosing between the two
 behaviors. Most contemporary IRC clients seem to use the former
 behavior; I generally tend to prefer the latter.)
</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:UserStatus" class="def">UserStatus</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Available" class="def">Available</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Away" class="def">Away</a></td><td class="doc"><p>User is away. TODO: add some sort of reason to this, or merge Away and
 Busy into Unavailable, which has a message and a reason (of type
 UnavailableReason or some such, whose constructors would be things like
 Away, Busy, etc.)
</p></td></tr><tr><td class="src"><a name="v:Busy" class="def">Busy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Offline" class="def">Offline</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:PartReason" class="def">PartReason</a>  </p><div class="doc"><p>Reasons that a user (us or someone else) left a room. This does not
 include the user disconnecting from the server altogether; such things are
 a completely separate event, namely UserQuit.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Parted" class="def">Parted</a> String</td><td class="doc"><p>User left the room
</p></td></tr><tr><td class="src"><a name="v:Kicked" class="def">Kicked</a> <a href="Zelden-Server.html#t:UserKey">UserKey</a> String</td><td class="doc"><p>User was kicked by the specified user for the specified reason
</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:EventCallback" class="def">EventCallback</a> = <a href="Zelden-Server.html#t:ConnectionBox">ConnectionBox</a> -&gt; <a href="Zelden-Server.html#t:Event">Event</a> -&gt; IO ()</p><div class="doc"><p>Alias for (,) that allows conveniently writing dictionaries as
 M.fromList [<a href="a.html">a</a> := <a href="b.html">b</a>, <a href="c.html">c</a> := <a href="d.html">d</a>].
 (:=) :: a -&gt; b -&gt; (a, b)
 (:=) = (,)
 infixl 1 :=
</p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Protocol" class="def">Protocol</a> a  <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:getProtocolName" class="def">getProtocolName</a> :: a -&gt; String</p><p class="src"><a name="v:initProtocol" class="def">initProtocol</a> :: a -&gt; IO ()</p><p class="src"><a name="v:likesPastebin" class="def">likesPastebin</a> :: a -&gt; Bool</p><p class="src"><a name="v:createConnection" class="def">createConnection</a> :: a -&gt; <a href="Zelden-Server.html#t:EventCallback">EventCallback</a> -&gt; IO <a href="Zelden-Server.html#t:ConnectionBox">ConnectionBox</a></p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Connection" class="def">Connection</a> a  <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:setParam" class="def">setParam</a> :: a -&gt; String -&gt; String -&gt; IO ()</p><p class="src"><a name="v:enable" class="def">enable</a> :: a -&gt; IO ()</p><p class="src"><a name="v:disable" class="def">disable</a> :: a -&gt; IO ()</p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Controller" class="def">Controller</a> a </p><div class="doc"><p>A class of types that can receive events from connections. Connections are
 given a Controller to which they indicate events that happen.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>